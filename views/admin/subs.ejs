<%- include('../partials/header', { title: 'Subs - Admin - Bright Prodigy' }) %>
<div class="layout-grid">
  <%- include('../partials/sidebar', { user: typeof user !== 'undefined' ? user : null, activeTab: 'subs' }) %>
  <div style="width:100%">
    <%- include('../partials/topbar', { user: typeof user !== 'undefined' ? user : null, currentTab: 'Subs' }) %>
    <div class="main-container p-4">
      <h1 class="text-2xl font-bold mb-4">Subs</h1>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-blue-100 sticky top-0 z-10">
            <tr>
              <% if (rows && rows.length > 0) { Object.keys(rows[0]).forEach(col => { %>
                <th class="px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
                  <%= col %>
                </th>
              <% }) } %>
            </tr>
          </thead>
          <tbody>
            <% if (rows && rows.length > 0) { %>
              <% rows.forEach((row, idx) => { %>
                <tr class="<%= idx % 2 === 0 ? 'bg-white' : 'bg-blue-50' %>">
                  <% Object.values(row).forEach(val => { %>
                    <td class="px-4 py-2 text-sm text-gray-900"><%= val %></td>
                  <% }) %>
                </tr>
              <% }) %>
            <% } else { %>
              <tr>
                <td colspan="100" class="text-center py-8 text-gray-400">No submissions found.</td>
              </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
    <%- include('../partials/footer') %>
  </div>
</div>
